{"version":3,"sources":["states/playingStates.js","contexts/stateContext.js","assets/icons/accent.svg","components/accent.js","components/note.js","components/musicSheet.js","contexts/speedContext.js","components/params.js","components/playerTrigger.js","utils/noteProvider.js","utils/libs.js","components/instruments.js","App.js","reportWebVitals.js","index.js"],"names":["PlayingStates","STOPPED","DISPLAY","SOUND","NEXT","StateContext","createContext","isPlaying","triggerPlaying","state","note","setNote","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","fill","stroke","strokeWidth","d","SvgAccent","_ref","svgRef","title","titleId","props","viewBox","ref","id","ForwardRef","AccentFrame","styled","div","Accent","NoteContainer","NoteStyled","NoteStyledTop","NoteContent","NoteData","AccentsContainer","AccentShell","AccentContent","getAccent","remainginIndex","content","buildContent","accents","nbAccents","value","Note","isTop","defaultProps","PropTypes","string","isRequired","number","bool","SheetContainer","Sheet","Ligne","MusicSheet","useContext","Array","map","_","index","className","includes","CircularProgress","color","SpeedContext","speed","setSpeed","Container","h3","SliderStyled","Params","Slider","marks","label","min","max","step","valueLabelDisplay","onChange","PlayerTrigger","Button","variant","onClick","Stop","PlayArrow","Notes","pitch","GetNote","previous","accept","Math","floor","random","SPEED_STORAGE_KEY","getProgressValue","elapsedTime","Instruments","useState","midiSounds","setMidiSounds","useEffect","cacheInstrument","playChordNow","appElementName","AppStyled","LinearProgressStyled","theme","createMuiTheme","palette","secondary","main","Version","App","timeoutRef","setTimeoutRef","setIsPlaying","setStateTmp","initTime","setIniTime","setElapsedTime","speedStr","localStorage","getItem","parseInt","stateSound","setTimeout","nextState","stateNext","resetData","newState","clearTimeout","Date","now","setItem","callback","delay","savedCallback","useRef","current","setInterval","clearInterval","useInterval","Provider","triggered","LinearProgress","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f6922129.chunk.js","sourcesContent":["const PlayingStates = {\n  STOPPED: \"STOPPED\", // initial state or after clicking stop\n  DISPLAY: \"DISPLAY\", // Display a note and wait _speed_ seconds\n  SOUND: \"SOUND\", // play sounds, wait for _SOUND_TIMEOUT_ seconds\n  NEXT: \"NEXT\", // hide note for _NEXT_TIMEOUT_ seconds before displaying new one\n};\n\nexport default PlayingStates;\n","import { createContext } from \"react\";\nimport PlayingStates from \"../states/playingStates\";\nexport const StateContext = createContext({\n  isPlaying: false,\n  triggerPlaying: null,\n  state: PlayingStates.STOPPED,\n  note: null,\n  setNote: null,\n});\n\nexport default StateContext;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  stroke: \"#000\",\n  strokeWidth: 0.265,\n  d: \"M.122 65.515C8.064 46.234 20.317 24.883 58.6 3.122 65.353-.432 70.35-.38 72.775 1.042c2.507 2.22 1.67 5.785.24 6.014-32.98 10.08-55.251 31.762-72.893 58.46z\"\n});\n\nfunction SvgAccent(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 74.512 65.588\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAccent);\nexport default __webpack_public_path__ + \"static/media/accent.5b1bdd82.svg\";\nexport { ForwardRef as ReactComponent };","import styled from \"styled-components\";\n\nimport { ReactComponent as AccentSvg } from \"../assets/icons/accent.svg\";\n\nconst AccentFrame = styled.div`\n  width: 0.7em;\n  height: 0.1em;\n  svg path {\n    fill: black;\n    height: 0.5em;\n  }\n`;\n\nconst Accent = () => {\n  return (\n    <AccentFrame>\n      <AccentSvg />\n    </AccentFrame>\n  );\n};\n\nexport default Accent;\n","import styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Accent from \"./accent\";\n\nconst NoteContainer = styled.div`\n  margin-left: 1.4em;\n`;\n\nconst NoteStyled = styled.div`\n  font-size: 1.8em;\n  font-style: italic;\n  line-height: 1em;\n  margin-top: 0.6em;\n  margin-right: 0.2em;\n  width: 1em;\n`;\n\nconst NoteStyledTop = styled(NoteStyled)`\n  line-height: 1em;\n  margin-top: -0.33em;\n  margin-bottom: 0.93em;\n`;\n\nconst NoteContent = styled.div`\n  position: relative;\n`;\n\nconst NoteData = styled.div`\n  position: absolute;\n`;\n\nconst AccentsContainer = styled.div`\n  position: relative;\n  bottom: 0.28em;\n  right: 0.18em;\n`;\n\nconst AccentShell = styled.div`\n  position: relative;\n`;\nconst AccentContent = styled.div`\n  position: absolute;\n  left: -0.15em;\n  bottom: 0.08em;\n  color: red;\n`;\n\nconst getAccent = (remainginIndex, content) => {\n  if (remainginIndex === 1) return <Accent />;\n  return (\n    <>\n      <Accent />\n      <AccentShell>\n        <AccentContent>{getAccent(remainginIndex - 1, content)}</AccentContent>\n      </AccentShell>\n    </>\n  );\n};\n\nconst buildContent = (props) => {\n  let accents = null;\n  if (props.nbAccents > 0) {\n    accents = getAccent(props.nbAccents);\n  }\n  return (\n    <NoteContent>\n      <NoteData>{props.value}</NoteData>\n      <AccentsContainer>{accents}</AccentsContainer>\n    </NoteContent>\n  );\n};\n\nconst Note = (props) => (\n  <NoteContainer>\n    {props.isTop ? (\n      <NoteStyledTop>{buildContent(props)}</NoteStyledTop>\n    ) : (\n      <NoteStyled>{buildContent(props)}</NoteStyled>\n    )}\n  </NoteContainer>\n);\nNote.defaultProps = {\n  value: PropTypes.string.isRequired,\n  nbAccents: PropTypes.number.isRequired,\n  isTop: PropTypes.bool.isRequired,\n};\nNote.defaultProps = {\n  value: \"a\",\n  nbAccents: 0,\n  isTop: false,\n};\n\nexport default Note;\n","import { CircularProgress } from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport StateContext from \"../contexts/stateContext\";\nimport PlayingStates from \"../states/playingStates\";\nimport Note from \"./note\";\n\nconst SheetContainer = styled.div`\n  padding-top: 6em;\n  padding-bottom: 0.4em;\n  background-color: #f2eecb;\n`;\n\nconst Sheet = styled.div`\n  display: flex;\n  flex-direction: column;\n  border: 1px solid black;\n  border-top: none;\n`;\n\nconst Ligne = styled.div`\n  border-top: 1px solid black;\n  height: 1.2em;\n`;\n\nconst NoteContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  opacity: 0;\n  &.displayed {\n    opacity: 1;\n  }\n  transition: opacity 200ms ease-in;\n  height: 2em;\n`;\n\nfunction MusicSheet() {\n  const nbRows = 5;\n  const { state, note } = useContext(StateContext);\n  if (!note) return <CircularProgress color={\"secondary\"} />;\n  return (\n    <SheetContainer>\n      <Sheet>\n        {[...Array(nbRows)].map((_, index) => (\n          <Ligne key={index} />\n        ))}\n      </Sheet>\n      <NoteContainer\n        className={\n          [PlayingStates.DISPLAY, PlayingStates.SOUND].includes(state)\n            ? \"displayed\"\n            : \"\"\n        }\n      >\n        <Note\n          value={note.value}\n          nbAccents={note.nbAccents}\n          isTop={note.isTop}\n        />\n      </NoteContainer>\n    </SheetContainer>\n  );\n}\n\nexport default MusicSheet;\n","import { createContext } from \"react\";\nexport const SpeedContext = createContext({\n  speed: 0,\n  setSpeed: null,\n});\n\nexport default SpeedContext;\n","import { Slider } from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport SpeedContext from \"../contexts/speedContext\";\n\nconst Container = styled.h3`\n  margin-top: 6em;\n`;\n\nconst SliderStyled = styled.div``;\n\nfunction Params() {\n  const { speed, setSpeed } = useContext(SpeedContext);\n  return (\n    <Container>\n      <SliderStyled>\n        <Slider\n          marks={[\n            { value: 0, label: \"0\" },\n            { value: 1, label: \"1\" },\n            { value: 2, label: \"2\" },\n            { value: 3, label: \"3\" },\n            { value: 4, label: \"4\" },\n            { value: 5, label: \"5\" },\n          ]}\n          color={\"secondary\"}\n          min={0}\n          max={5}\n          step={0.1}\n          valueLabelDisplay={\"auto\"}\n          value={speed}\n          onChange={(_, value) => {\n            setSpeed(value);\n          }}\n        />\n      </SliderStyled>\n    </Container>\n  );\n}\n\nexport default Params;\n","import { Button } from \"@material-ui/core\";\nimport { PlayArrow, Stop } from \"@material-ui/icons\";\nimport React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport StateContext from \"../contexts/stateContext\";\n\nconst Container = styled.div`\n  margin-top: 2em;\n`;\n\nconst PlayerTrigger = () => {\n  const { isPlaying, triggerPlaying } = useContext(StateContext);\n  return (\n    <Container>\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={() => triggerPlaying(!isPlaying)}\n      >\n        {isPlaying ? <Stop /> : <PlayArrow />}\n      </Button>\n    </Container>\n  );\n};\n\nexport default PlayerTrigger;\n","const Notes = [\n  { value: \"a\", nbAccents: 0, isTop: true, pitch: 8 + 12 * 4 },\n  { value: \"a\", nbAccents: 0, isTop: false, pitch: 6 + 12 * 4 },\n  { value: \"a\", nbAccents: 1, isTop: false, pitch: 4 + 12 * 4 },\n  { value: \"a\", nbAccents: 2, isTop: false, pitch: 3 + 12 * 4 },\n  { value: \"a\", nbAccents: 3, isTop: false, pitch: 1 + 12 * 4 },\n  { value: \"4\", nbAccents: 0, isTop: false, pitch: 11 + 12 * 3 },\n  { value: \"5\", nbAccents: 0, isTop: false, pitch: 10 + 12 * 3 },\n  { value: \"6\", nbAccents: 0, isTop: false, pitch: 8 + 12 * 3 },\n];\n\nexport const GetNote = (previous) => {\n  let accept = false;\n  let note;\n  while (!accept) {\n    const index = Math.floor(Math.random() * Notes.length);\n    note = Notes[index];\n    accept = note === previous ? Math.random() < 0.5 : true;\n  }\n  return note;\n};\n","export const SPEED_STORAGE_KEY = \"SPEED_STORAGE_KEY\";\n\nconst PROGRESS_DELAY = 10;\nexport const getProgressValue = (elapsedTime, speed) => {\n  if (!elapsedTime || !speed) return 100;\n  return 100 - (elapsedTime * (100 + PROGRESS_DELAY)) / speed;\n};\n\nexport default getProgressValue;\n","import { useContext, useEffect, useState } from \"react\";\nimport MIDISounds from \"midi-sounds-react\";\nimport StateContext from \"../contexts/stateContext\";\nimport PlayingStates from \"../states/playingStates\";\n\nconst instrumentId = 246;\n\nfunction Instruments() {\n  const [midiSounds, setMidiSounds] = useState(null);\n  const { state, note } = useContext(StateContext);\n  useEffect(() => {\n    if (midiSounds) {\n      midiSounds.cacheInstrument(instrumentId);\n    }\n  }, [midiSounds]);\n\n  useEffect(() => {\n    if (state === PlayingStates.SOUND) {\n      midiSounds.playChordNow(instrumentId, [note.pitch], 2);\n    }\n  }, [state, midiSounds, note]);\n\n  return <MIDISounds ref={(ref) => setMidiSounds(ref)} appElementName=\"root\" />;\n}\n\nexport default Instruments;\n\n// https://surikov.github.io/midi-sounds-react-examples/examples/midi-sounds-example7/build/\n\n// acoustic guitar (nylon): 244 - 255\n// acoustic guitar (steel): 256 - 273\n\n// do  0+12*3\n// re  2+12*3\n// mi  4+12*3\n// fa  5+12*3\n// sol 7+12*3\n// la  9+12*3\n// si  11+12*3\n// do  0+12*4\n// re  2+12*4\n// mi  4+12*4\n// fa  5+12*4\n// sol 7+12*4\n// la  9+12*4\n// si  11+12*4\n// do  0+12*5\n// re  2+12*5\n// mi  4+12*5\n// fa  5+12*5\n// sol 7+12*5\n// la  9+12*5\n// si  11+12*5\n","// @ts-nocheck\nimport {\n  createMuiTheme,\n  LinearProgress,\n  MuiThemeProvider,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport \"./App.css\";\nimport MusicSheet from \"./components/musicSheet\";\nimport Params from \"./components/params\";\nimport PlayerTrigger from \"./components/playerTrigger\";\nimport StateContext from \"./contexts/stateContext\";\nimport SpeedContext from \"./contexts/speedContext\";\nimport { GetNote } from \"./utils/noteProvider\";\nimport PlayingStates from \"./states/playingStates\";\nimport { getProgressValue, SPEED_STORAGE_KEY } from \"./utils/libs\";\nimport Instruments from \"./components/instruments\";\n\nconst AppStyled = styled.div`\n  margin: 0 auto;\n  width: 24em;\n`;\n\nconst LinearProgressStyled = styled.div`\n  margin: 2em 0 0em 0;\n`;\n\nconst theme = createMuiTheme({\n  palette: {\n    secondary: {\n      main: \"#686852\",\n    },\n  },\n});\n\nconst Version = styled.div``;\n\nfunction App() {\n  const [timeoutRef, setTimeoutRef] = useState(null);\n  const [speed, setSpeed] = useState(2.0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [state, setStateTmp] = useState(PlayingStates.STOPPED);\n  const [note, setNote] = useState(null);\n  const [initTime, setIniTime] = useState(null);\n  const [elapsedTime, setElapsedTime] = useState(null);\n\n  useEffect(() => {\n    setNote(GetNote());\n    var speedStr = localStorage.getItem(SPEED_STORAGE_KEY);\n    if (speedStr) setSpeed(parseInt(speedStr));\n  }, []);\n\n  // timers & states\n  const stateSound = () =>\n    setTimeout(() => {\n      nextState(PlayingStates.NEXT);\n    }, 2000);\n\n  const stateNext = () =>\n    setTimeout(() => {\n      setNote(GetNote(note));\n      nextState(PlayingStates.DISPLAY);\n    }, 1000);\n\n  // button trigger\n  const triggerPlaying = (triggered) => {\n    if (triggered) setNote(GetNote());\n    setIsPlaying(triggered);\n    nextState(triggered ? PlayingStates.DISPLAY : PlayingStates.STOPPED);\n  };\n  // data reset\n  const resetData = () => {\n    setElapsedTime(null);\n    setIniTime(null);\n  };\n\n  const nextState = (newState) => {\n    switch (newState) {\n      case PlayingStates.STOPPED:\n        clearTimeout(timeoutRef);\n        resetData();\n        break;\n      case PlayingStates.DISPLAY:\n        setIniTime(Date.now());\n        break;\n      case PlayingStates.SOUND:\n        setElapsedTime(speed);\n        setTimeoutRef(stateSound());\n        break;\n      case PlayingStates.NEXT:\n        setTimeoutRef(stateNext());\n        resetData();\n        break;\n      default:\n        return;\n    }\n    setStateTmp(newState);\n  };\n\n  useEffect(() => {\n    localStorage.setItem(SPEED_STORAGE_KEY, speed);\n  }, [speed]);\n\n  const useInterval = (callback, delay) => {\n    const savedCallback = useRef();\n    useEffect(() => {\n      savedCallback.current = callback;\n    }, [callback]);\n    useEffect(() => {\n      function tick() {\n        if (savedCallback) savedCallback.current();\n      }\n      if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    }, [delay]);\n  };\n\n  useInterval(() => {\n    if (initTime && state === PlayingStates.DISPLAY && elapsedTime < speed) {\n      setElapsedTime((Date.now() - initTime) / 1000);\n    } else if (elapsedTime >= speed && state === PlayingStates.DISPLAY) {\n      nextState(PlayingStates.SOUND);\n    }\n  }, 200);\n\n  return (\n    <SpeedContext.Provider value={{ speed, setSpeed }}>\n      <StateContext.Provider\n        value={{ isPlaying, triggerPlaying, state, note, setNote }}\n      >\n        <AppStyled className=\"App\">\n          <MuiThemeProvider theme={theme}>\n            <MusicSheet />\n            <LinearProgressStyled>\n              <LinearProgress\n                variant=\"determinate\"\n                value={getProgressValue(elapsedTime, speed)}\n                color={\"secondary\"}\n              />\n            </LinearProgressStyled>\n            <PlayerTrigger />\n            <Params />\n            <Instruments />\n            <Version>v1.2</Version>\n          </MuiThemeProvider>\n        </AppStyled>\n      </StateContext.Provider>\n    </SpeedContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}