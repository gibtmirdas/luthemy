(this.webpackJsonpluthemy=this.webpackJsonpluthemy||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a,i=n(0),c=n.n(i),s=n(18),r=n.n(s),o=(n(62),n(13)),l=n(5),u=n(110),b=n(111),j=n(51),d=n(6),O=(n(63),n(15)),p=n(106),h={STOPPED:"STOPPED",DISPLAY:"DISPLAY",SOUND:"SOUND",NEXT:"NEXT"},f=Object(i.createContext)({isPlaying:!1,triggerPlaying:null,state:h.STOPPED,note:null,setNote:null,nextNote:null,setNextNote:null}),v=n(9),m=n.n(v),x=["title","titleId"];function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function S(e,t){var n=e.title,c=e.titleId,s=y(e,x);return i.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 74.512 65.588",ref:t,"aria-labelledby":c},s),n?i.createElement("title",{id:c},n):null,a||(a=i.createElement("path",{fill:"none",stroke:"#000",strokeWidth:.265,d:"M.122 65.515C8.064 46.234 20.317 24.883 58.6 3.122 65.353-.432 70.35-.38 72.775 1.042c2.507 2.22 1.67 5.785.24 6.014-32.98 10.08-55.251 31.762-72.893 58.46z"})))}var P,T,A,N,D,E,w,I,k,L,C=i.forwardRef(S),Y=(n.p,n(2)),U=d.a.div(P||(P=Object(l.a)(["\n  width: 0.7em;\n  height: 0.1em;\n  svg path {\n    fill: black;\n    height: 0.5em;\n  }\n"]))),R=function(){return Object(Y.jsx)(U,{children:Object(Y.jsx)(C,{})})},X=d.a.div(T||(T=Object(l.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: ",";\n  margin-left: ",";\n  "])),(function(e){return e.$isLast?"end":"center"}),(function(e){return e.$isLast?"0":"1.4em"})),F=d.a.div(A||(A=Object(l.a)(["\n  font-size: 1.8em;\n  font-style: italic;\n  line-height: 1em;\n  margin-top: 0.6em;\n  margin-right: 0.2em;\n  width: 1em;\n"]))),M=Object(d.a)(F)(N||(N=Object(l.a)(["\n  line-height: 1em;\n  margin-top: -0.33em;\n  margin-bottom: 0.93em;\n"]))),q=d.a.div(D||(D=Object(l.a)(["\n  position: relative;\n"]))),B=d.a.div(E||(E=Object(l.a)(["\n  position: absolute;\n"]))),$=d.a.div(w||(w=Object(l.a)(["\n  position: relative;\n  bottom: 0.28em;\n  right: 0.18em;\n"]))),z=d.a.div(I||(I=Object(l.a)(["\n  position: relative;\n"]))),J=d.a.div(k||(k=Object(l.a)(["\n  position: absolute;\n  left: -0.15em;\n  bottom: 0.08em;\n  color: red;\n"]))),_=Object(d.a)(X)(L||(L=Object(l.a)(["\n  visibility: hidden;\n"]))),G=function e(t,n){return 1===t?Object(Y.jsx)(R,{}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(R,{}),Object(Y.jsx)(z,{children:Object(Y.jsx)(J,{children:e(t-1,n)})})]})},K=function(e){var t=null;return e.nbAccents>0&&(t=G(e.nbAccents)),Object(Y.jsxs)(q,{children:[Object(Y.jsx)(B,{children:e.value}),Object(Y.jsx)($,{children:t})]})},W=function(e){return Object(Y.jsx)(X,{$isLast:e.isLast,children:e.display?e.isTop?Object(Y.jsx)(M,{children:K(e)}):Object(Y.jsx)(F,{children:K(e)}):Object(Y.jsx)(_,{children:"nope"})})};W.defaultProps={value:m.a.string.isRequired,nbAccents:m.a.number.isRequired,isTop:m.a.bool.isRequired},W.defaultProps={value:"a",nbAccents:0,isTop:!1,display:!0,isLast:!0};var H,Q,V,Z,ee=W,te=d.a.div(H||(H=Object(l.a)(["\n  padding-top: 6em;\n  padding-bottom: 0.4em;\n  background-color: #f2eecb;\n"]))),ne=d.a.div(Q||(Q=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  border: 1px solid black;\n  border-top: none;\n"]))),ae=d.a.div(V||(V=Object(l.a)(["\n  border-top: 1px solid black;\n  height: 1.2em;\n"]))),ie=d.a.div(Z||(Z=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  opacity: 0;\n  &.displayed {\n    opacity: 1;\n  }\n  transition: opacity 200ms ease-in;\n  height: 2em;\n"])));var ce,se,re=function(){var e=Object(i.useContext)(f),t=e.state,n=e.note,a=e.nextNote;return n?Object(Y.jsxs)(te,{children:[Object(Y.jsx)(ne,{children:Object(O.a)(Array(5)).map((function(e,t){return Object(Y.jsx)(ae,{},t)}))}),Object(Y.jsxs)(ie,{className:[h.DISPLAY,h.NEXT,h.SOUND].includes(t)?"displayed":"",children:[Object(Y.jsx)(ee,{display:!1}),Object(Y.jsx)(ee,{value:n.value,nbAccents:n.nbAccents,isTop:n.isTop,isLast:!1}),Object(Y.jsx)(ee,{value:a.value,nbAccents:a.nbAccents,isTop:a.isTop,isLast:!0})]})]}):Object(Y.jsx)(p.a,{color:"secondary"})},oe=n(113),le=Object(i.createContext)({speed:0,setSpeed:null}),ue=d.a.h3(ce||(ce=Object(l.a)(["\n  margin-top: 6em;\n"]))),be=d.a.div(se||(se=Object(l.a)([""])));var je,de,Oe,pe,he=function(){var e=Object(i.useContext)(le),t=e.speed,n=e.setSpeed;return Object(Y.jsx)(ue,{children:Object(Y.jsx)(be,{children:Object(Y.jsx)(oe.a,{marks:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],color:"secondary",min:0,max:3,step:.1,valueLabelDisplay:"auto",value:t,onChange:function(e,t){n(t)}})})})},fe=n(112),ve=n(108),me=n(109),xe=d.a.div(je||(je=Object(l.a)(["\n  margin-top: 2em;\n"]))),ge=function(){var e=Object(i.useContext)(f),t=e.isPlaying,n=e.triggerPlaying;return Object(Y.jsx)(xe,{children:Object(Y.jsx)(fe.a,{variant:"contained",color:"secondary",onClick:function(){return n(!t)},children:t?Object(Y.jsx)(ve.a,{}):Object(Y.jsx)(me.a,{})})})},ye=[{value:"a",nbAccents:0,isTop:!0,pitch:[44,56]},{value:"a",nbAccents:0,isTop:!1,pitch:[42,54]},{value:"a",nbAccents:1,isTop:!1,pitch:[40,52]},{value:"a",nbAccents:2,isTop:!1,pitch:[39,51]},{value:"a",nbAccents:3,isTop:!1,pitch:[37,49]},{value:"4",nbAccents:0,isTop:!1,pitch:[35,47]},{value:"5",nbAccents:0,isTop:!1,pitch:[33,45]},{value:"6",nbAccents:0,isTop:!1,pitch:[32,44]}],Se=function(e){for(var t,n=!1;!n;){var a=Math.floor(Math.random()*ye.length);n=(t=ye[a])!==e||Math.random()<.5}return t},Pe="SPEED_STORAGE_KEY",Te=function(e,t){return e&&t?100-110*e/t:100},Ae=n(48),Ne=n(20),De=n(49),Ee=n(52),we=n(50),Ie=n.n(we),ke=function(e){Object(De.a)(n,e);var t=Object(Ee.a)(n);function n(e){var a;return Object(Ae.a)(this,n),(a=t.call(this,e)).state={played:!1,init:!1},a}return Object(Ne.a)(n,[{key:"componentDidUpdate",value:function(){this.props.state===h.SOUND&&this.props.note&&!this.state.played?(this.midiSounds.playChordNow(246,this.props.note.pitch,2.5),this.setState({played:!0})):this.props.state===h.NEXT&&this.state.played&&this.setState({played:!1})}},{key:"playTestInstrument",value:function(){console.debug("===> PLAY",this.midiSounds),this.midiSounds.playChordNow(246,[60],2.5),this.setState({init:!0})}},{key:"render",value:function(){var e=this;return this.playTestInstrument.bind(this),Object(Y.jsxs)("div",{className:"App",children:[Object(Y.jsx)("p",{children:Object(Y.jsx)("button",{onClick:this.playTestInstrument.bind(this),children:this.state.init?"ready":"Please init !!"})}),Object(Y.jsx)(Ie.a,{ref:function(t){return e.midiSounds=t},appElementName:"root",instruments:[246]})]})}}]),n}(i.Component),Le=d.a.div(de||(de=Object(l.a)(["\n  margin: 0 auto;\n  width: 24em;\n"]))),Ce=d.a.div(Oe||(Oe=Object(l.a)(["\n  margin: 2em 0 0em 0;\n"]))),Ye=Object(j.a)({palette:{secondary:{main:"#686852"}}}),Ue=d.a.div(pe||(pe=Object(l.a)([""])));var Re=function(){var e=Object(i.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(2),s=Object(o.a)(c,2),r=s[0],l=s[1],j=Object(i.useState)(!1),d=Object(o.a)(j,2),O=d[0],p=d[1],v=Object(i.useState)(h.STOPPED),m=Object(o.a)(v,2),x=m[0],g=m[1],y=Object(i.useState)(null),S=Object(o.a)(y,2),P=S[0],T=S[1],A=Object(i.useState)(null),N=Object(o.a)(A,2),D=N[0],E=N[1],w=Object(i.useState)(null),I=Object(o.a)(w,2),k=I[0],L=I[1],C=Object(i.useState)(null),U=Object(o.a)(C,2),R=U[0],X=U[1];Object(i.useEffect)((function(){T(Se()),E(Se());var e=localStorage.getItem(Pe);e&&l(parseInt(e))}),[]);var F=function(){return setTimeout((function(){B(h.NEXT)}),2e3)},M=function(){return setTimeout((function(){var e=D;E(Se(e)),T(e),B(h.DISPLAY)}),1e3)},q=function(){X(null),L(null)},B=function(e){switch(e){case h.STOPPED:clearTimeout(n),q();break;case h.DISPLAY:L(Date.now());break;case h.SOUND:X(r),a(F());break;case h.NEXT:a(M()),q();break;default:return}g(e)};return Object(i.useEffect)((function(){localStorage.setItem(Pe,r)}),[r]),function(e,t){var n=Object(i.useRef)();Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){n&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){k&&x===h.DISPLAY&&R<r?X((Date.now()-k)/1e3):R>=r&&x===h.DISPLAY&&B(h.SOUND)}),200),Object(Y.jsx)(le.Provider,{value:{speed:r,setSpeed:l},children:Object(Y.jsx)(f.Provider,{value:{isPlaying:O,triggerPlaying:function(e){p(e),B(e?h.DISPLAY:h.STOPPED)},state:x,note:P,setNote:T,nextNote:D,setNextNote:E},children:Object(Y.jsx)(Le,{className:"App",children:Object(Y.jsxs)(u.a,{theme:Ye,children:[Object(Y.jsx)(re,{}),Object(Y.jsx)(Ce,{children:Object(Y.jsx)(b.a,{variant:"determinate",value:Te(R,r),color:"secondary"})}),Object(Y.jsx)(ge,{}),Object(Y.jsx)(he,{}),Object(Y.jsx)(f.Consumer,{children:function(e){return Object(Y.jsx)(ke,{state:e.state,note:P})}}),Object(Y.jsx)(Ue,{children:"v1.5"})]})})})})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};r.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(Re,{})}),document.getElementById("root")),Xe()}},[[90,1,2]]]);
//# sourceMappingURL=main.26a14bdc.chunk.js.map