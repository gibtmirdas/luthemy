(this.webpackJsonpluthemy=this.webpackJsonpluthemy||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a,c=n(0),i=n.n(c),r=n(19),s=n.n(r),o=(n(62),n(14)),l=n(5),u=n(110),b=n(111),j=n(52),d=n(6),O=(n(63),n(15)),p=n(106),h={STOPPED:"STOPPED",DISPLAY:"DISPLAY",SOUND:"SOUND",NEXT:"NEXT"},f=Object(c.createContext)({isPlaying:!1,triggerPlaying:null,state:h.STOPPED,note:null,setNote:null}),v=n(9),m=n.n(v),x=["title","titleId"];function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,a,c=function(e,t){if(null==e)return{};var n,a,c={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}function S(e,t){var n=e.title,i=e.titleId,r=y(e,x);return c.createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 74.512 65.588",ref:t,"aria-labelledby":i},r),n?c.createElement("title",{id:i},n):null,a||(a=c.createElement("path",{fill:"none",stroke:"#000",strokeWidth:.265,d:"M.122 65.515C8.064 46.234 20.317 24.883 58.6 3.122 65.353-.432 70.35-.38 72.775 1.042c2.507 2.22 1.67 5.785.24 6.014-32.98 10.08-55.251 31.762-72.893 58.46z"})))}var P,T,A,D,E,I,w,k,N,C=c.forwardRef(S),L=(n.p,n(2)),Y=d.a.div(P||(P=Object(l.a)(["\n  width: 0.7em;\n  height: 0.1em;\n  svg path {\n    fill: black;\n    height: 0.5em;\n  }\n"]))),U=function(){return Object(L.jsx)(Y,{children:Object(L.jsx)(C,{})})},R=d.a.div(T||(T=Object(l.a)(["\n  margin-left: 1.4em;\n"]))),F=d.a.div(A||(A=Object(l.a)(["\n  font-size: 1.8em;\n  font-style: italic;\n  line-height: 1em;\n  margin-top: 0.6em;\n  margin-right: 0.2em;\n  width: 1em;\n"]))),M=Object(d.a)(F)(D||(D=Object(l.a)(["\n  line-height: 1em;\n  margin-top: -0.33em;\n  margin-bottom: 0.93em;\n"]))),X=d.a.div(E||(E=Object(l.a)(["\n  position: relative;\n"]))),q=d.a.div(I||(I=Object(l.a)(["\n  position: absolute;\n"]))),B=d.a.div(w||(w=Object(l.a)(["\n  position: relative;\n  bottom: 0.28em;\n  right: 0.18em;\n"]))),z=d.a.div(k||(k=Object(l.a)(["\n  position: relative;\n"]))),J=d.a.div(N||(N=Object(l.a)(["\n  position: absolute;\n  left: -0.15em;\n  bottom: 0.08em;\n  color: red;\n"]))),_=function e(t,n){return 1===t?Object(L.jsx)(U,{}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(U,{}),Object(L.jsx)(z,{children:Object(L.jsx)(J,{children:e(t-1,n)})})]})},G=function(e){var t=null;return e.nbAccents>0&&(t=_(e.nbAccents)),Object(L.jsxs)(X,{children:[Object(L.jsx)(q,{children:e.value}),Object(L.jsx)(B,{children:t})]})},K=function(e){return Object(L.jsx)(R,{children:e.isTop?Object(L.jsx)(M,{children:G(e)}):Object(L.jsx)(F,{children:G(e)})})};K.defaultProps={value:m.a.string.isRequired,nbAccents:m.a.number.isRequired,isTop:m.a.bool.isRequired},K.defaultProps={value:"a",nbAccents:0,isTop:!1};var W,H,Q,V,Z=K,$=d.a.div(W||(W=Object(l.a)(["\n  padding-top: 6em;\n  padding-bottom: 0.4em;\n  background-color: #f2eecb;\n"]))),ee=d.a.div(H||(H=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  border: 1px solid black;\n  border-top: none;\n"]))),te=d.a.div(Q||(Q=Object(l.a)(["\n  border-top: 1px solid black;\n  height: 1.2em;\n"]))),ne=d.a.div(V||(V=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  opacity: 0;\n  &.displayed {\n    opacity: 1;\n  }\n  transition: opacity 200ms ease-in;\n  height: 2em;\n"])));var ae,ce,ie=function(){var e=Object(c.useContext)(f),t=e.state,n=e.note;return n?Object(L.jsxs)($,{children:[Object(L.jsx)(ee,{children:Object(O.a)(Array(5)).map((function(e,t){return Object(L.jsx)(te,{},t)}))}),Object(L.jsx)(ne,{className:[h.DISPLAY,h.SOUND].includes(t)?"displayed":"",children:Object(L.jsx)(Z,{value:n.value,nbAccents:n.nbAccents,isTop:n.isTop})})]}):Object(L.jsx)(p.a,{color:"secondary"})},re=n(113),se=Object(c.createContext)({speed:0,setSpeed:null}),oe=d.a.h3(ae||(ae=Object(l.a)(["\n  margin-top: 6em;\n"]))),le=d.a.div(ce||(ce=Object(l.a)([""])));var ue,be,je,de,Oe=function(){var e=Object(c.useContext)(se),t=e.speed,n=e.setSpeed;return Object(L.jsx)(oe,{children:Object(L.jsx)(le,{children:Object(L.jsx)(re.a,{marks:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],color:"secondary",min:0,max:3,step:.1,valueLabelDisplay:"auto",value:t,onChange:function(e,t){n(t)}})})})},pe=n(112),he=n(108),fe=n(109),ve=d.a.div(ue||(ue=Object(l.a)(["\n  margin-top: 2em;\n"]))),me=function(){var e=Object(c.useContext)(f),t=e.isPlaying,n=e.triggerPlaying;return Object(L.jsx)(ve,{children:Object(L.jsx)(pe.a,{variant:"contained",color:"secondary",onClick:function(){return n(!t)},children:t?Object(L.jsx)(he.a,{}):Object(L.jsx)(fe.a,{})})})},xe=[{value:"a",nbAccents:0,isTop:!0,pitch:[44,56]},{value:"a",nbAccents:0,isTop:!1,pitch:[42,54]},{value:"a",nbAccents:1,isTop:!1,pitch:[40,52]},{value:"a",nbAccents:2,isTop:!1,pitch:[39,51]},{value:"a",nbAccents:3,isTop:!1,pitch:[37,49]},{value:"4",nbAccents:0,isTop:!1,pitch:[35,47]},{value:"5",nbAccents:0,isTop:!1,pitch:[33,45]},{value:"6",nbAccents:0,isTop:!1,pitch:[32,44]}],ge=function(e){for(var t,n=!1;!n;){var a=Math.floor(Math.random()*xe.length);n=(t=xe[a])!==e||Math.random()<.5}return t},ye="SPEED_STORAGE_KEY",Se=function(e,t){return e&&t?100-110*e/t:100},Pe=n(33),Te=n(16),Ae=n(34),De=n(36),Ee=n(35),Ie=n.n(Ee),we=function(e){Object(Ae.a)(n,e);var t=Object(De.a)(n);function n(e){var a;return Object(Pe.a)(this,n),(a=t.call(this,e)).state={played:!1,init:!1},a}return Object(Te.a)(n,[{key:"componentDidUpdate",value:function(){this.props.state===h.SOUND&&this.props.note&&!this.state.played?(this.midiSounds.playChordNow(246,this.props.note.pitch,2.5),this.setState({played:!0})):this.props.state===h.NEXT&&this.state.played&&this.setState({played:!1})}},{key:"playTestInstrument",value:function(){console.debug("===> PLAY",this.midiSounds),this.midiSounds.playChordNow(246,[60],2.5),this.setState({init:!0})}},{key:"render",value:function(){var e=this;return this.playTestInstrument.bind(this),Object(L.jsxs)("div",{className:"App",children:[Object(L.jsx)("p",{children:Object(L.jsx)("button",{onClick:this.playTestInstrument.bind(this),children:this.state.init?"ready":"Please init !!"})}),Object(L.jsx)(Ie.a,{ref:function(t){return e.midiSounds=t},appElementName:"root",instruments:[246]})]})}}]),n}(c.Component),ke=(c.Component,d.a.div(be||(be=Object(l.a)(["\n  margin: 0 auto;\n  width: 24em;\n"])))),Ne=d.a.div(je||(je=Object(l.a)(["\n  margin: 2em 0 0em 0;\n"]))),Ce=Object(j.a)({palette:{secondary:{main:"#686852"}}}),Le=d.a.div(de||(de=Object(l.a)([""])));var Ye=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(2),r=Object(o.a)(i,2),s=r[0],l=r[1],j=Object(c.useState)(!1),d=Object(o.a)(j,2),O=d[0],p=d[1],v=Object(c.useState)(h.STOPPED),m=Object(o.a)(v,2),x=m[0],g=m[1],y=Object(c.useState)(null),S=Object(o.a)(y,2),P=S[0],T=S[1],A=Object(c.useState)(null),D=Object(o.a)(A,2),E=D[0],I=D[1],w=Object(c.useState)(null),k=Object(o.a)(w,2),N=k[0],C=k[1];Object(c.useEffect)((function(){T(ge());var e=localStorage.getItem(ye);e&&l(parseInt(e))}),[]);var Y=function(){return setTimeout((function(){F(h.NEXT)}),2e3)},U=function(){return setTimeout((function(){T(ge(P)),F(h.DISPLAY)}),1e3)},R=function(){C(null),I(null)},F=function(e){switch(e){case h.STOPPED:clearTimeout(n),R();break;case h.DISPLAY:I(Date.now());break;case h.SOUND:C(s),a(Y());break;case h.NEXT:a(U()),R();break;default:return}g(e)};return Object(c.useEffect)((function(){localStorage.setItem(ye,s)}),[s]),function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){n&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){E&&x===h.DISPLAY&&N<s?C((Date.now()-E)/1e3):N>=s&&x===h.DISPLAY&&F(h.SOUND)}),200),Object(L.jsx)(se.Provider,{value:{speed:s,setSpeed:l},children:Object(L.jsx)(f.Provider,{value:{isPlaying:O,triggerPlaying:function(e){e&&T(ge()),p(e),F(e?h.DISPLAY:h.STOPPED)},state:x,note:P,setNote:T},children:Object(L.jsx)(ke,{className:"App",children:Object(L.jsxs)(u.a,{theme:Ce,children:[Object(L.jsx)(ie,{}),Object(L.jsx)(Ne,{children:Object(L.jsx)(b.a,{variant:"determinate",value:Se(N,s),color:"secondary"})}),Object(L.jsx)(me,{}),Object(L.jsx)(Oe,{}),Object(L.jsx)(f.Consumer,{children:function(e){return Object(L.jsx)(we,{state:e.state,note:P})}}),Object(L.jsx)(Le,{children:"v1.4"})]})})})})},Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};s.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(Ye,{})}),document.getElementById("root")),Ue()}},[[90,1,2]]]);
//# sourceMappingURL=main.c66a2827.chunk.js.map